(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{27:function(e,t,n){},41:function(e,t,n){},42:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=42},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),r=n(20),a=n.n(r),i=(n(41),n(18)),u=n(28),s=n.n(u),d=(n(27),n(36)),l=n(16),f=n(19),m=n.n(f),j=n(26),v=n(1),b=Object(l.b)((function(e){return{remotes:e.remotes}}))((function(e){var t=e.remotes,n=Object(c.useRef)();return Object(c.useEffect)((function(){document.me.on("call",function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.answer(null),t.on("stream",(function(e){n.current.srcObject=e,n.current.addEventListener("touchmove",(function(e){document.client[t.peer].send([e.touches[0].movementX,e.touches[0].movementY])}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.current.addEventListener("mousemove",(function(e){var t=window.screen,c=t.availHeight,o=t.availWidth,r=n.current.getBoundingClientRect(),a=r.top,i=r.left,u=r.width,s=r.height,d=e.x,l=e.y,f=[Math.round((d-i)*o/u),Math.round((l-a)*c/s)];document.socket.emit("mousemove",f)}))}),[]),Object(v.jsxs)("div",{className:"RemoteList",children:[null===t||void 0===t?void 0:t.map((function(e){return Object(v.jsxs)("div",{children:[" ",e," ",Object(v.jsx)("button",{onClick:(t=e,Object(j.a)(m.a.mark((function e(){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});case 2:c=e.sent,document.me.call(t,c).on("stream",(function(e){n.current.srcObject=e,n.current.addEventListener("touchmove",(function(e){document.clients[t].send(e)}))}));case 5:case"end":return e.stop()}}),e)})))),children:"Call"})]},e);var t})),Object(v.jsx)("video",{className:"RemoteList_video",ref:n,autoPlay:!0,controls:!0})]})})),p=n(35);function O(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){var e=Object(p.a)("http://localhost:5000/");document.socket=e,e.on("connect",(function(){o(!0)})),e.on("done",(function(e){}))}),[]),Object(v.jsx)("div",{className:"Socket",children:n&&"Connected"})}var h=Object(d.a)("abcdef",4);document.remote={},document.client={};var x=Object(l.b)((function(e){return{}}),(function(e){return{addPeer:function(t){var n=t.type,c=t.id;return e({type:"ADD_PEER",data:{type:n,id:c}})}}}))((function(e){var t=e.addPeer,n=Object(c.useState)(null),o=Object(i.a)(n,2),r=o[0],a=o[1],u=Object(c.useState)(""),d=Object(i.a)(u,2),l=d[0],f=d[1];return Object(c.useEffect)((function(){var e=new s.a(h());e.on("open",(function(t){document.me=e,console.log(t),a(t)})),e.on("connection",(function(e){e.on("open",(function(){e.on("data",(function(e){console.log("Incoming data",e)})),document.remote[e.peer]=e,t({type:"remotes",id:e.peer})}))}))}),[]),Object(v.jsxs)("div",{className:"PeerMake",children:[Object(v.jsx)("input",{className:"PeerMake_input_me",type:"text",value:r}),Object(v.jsx)("input",{className:"PeerMake_input_you",type:"text",placeholder:"enter key..",value:l,onChange:function(e){var t=e.target.value;f(t)},onBlur:function(){var e=document.me.connect(l);e.on("open",(function(){e.on("data",(function(e){console.log(e)})),e.send({a:window.screen.width,b:window.screen.height}),document.client[l]=e,t({type:"clients",id:l})}))}}),Object(v.jsx)(O,{}),r&&Object(v.jsx)(b,{})]})})),w=(n.p,n(24)),g=n(33),y=n(34),k={remotes:[],clients:[]},E=Object(y.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.data,c=t.type;switch(c){case"ADD_PEER":e[n.type].push(n.id);break;default:return e}})),D=Object(w.createStore)(E,Object(g.composeWithDevTools)());n(56);var N=function(){return Object(c.useEffect)((function(){console.log(D)})),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(x,{}),Object(v.jsx)("h1",{children:"Hello"})]})};a.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(l.a,{store:D,children:Object(v.jsx)(N,{})})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.ae9b2efd.chunk.js.map